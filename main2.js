var data = [
    {
        'id': 1,
        'name': 'TCL Google TV 58P635',
        'category': 'Tivi',
        'price': 10490000,
        'sale': 9990000,
        'image': './image/tivi1.jpeg',
        'hotdeal': 1,
        'star': 5,
        'description': 'Sở hữu thiết kế sang trọng, màn hình siêu mỏng kích thước 58 inch, độ phân giải 4K sắc nét, công nghệ HDR10 tối ưu độ sáng, độ tương phản cho trải nghiệm xem phim tuyệt vời. Tích hợp hệ điều hành Google TV với giao diện trực quan, dễ sử dụng cùng kho ứng dụng giải trí đa dạng, phong phú. '
    },
    {
        'id': 2,
        'name': 'LG Smart TV 55UQ8000PSC',
        'category': 'Tivi',
        'price': 12990000,
        'sale': 11990000,
        'image': './image/tivi2.jpeg',
        'hotdeal': 0,
        'star': 3.5,
        'description': 'Sở hữu thiết kế sang trọng, màn hình siêu mỏng kích thước 58 inch, độ phân giải 4K sắc nét, công nghệ HDR10 tối ưu độ sáng, độ tương phản cho trải nghiệm xem phim tuyệt vời. Tích hợp hệ điều hành Google TV với giao diện trực quan, dễ sử dụng cùng kho ứng dụng giải trí đa dạng, phong phú. '
    },
    {
        'id': 3,
        'name': 'Casper Android TV 32HG5200',
        'category': 'Tivi',
        'price': 6990000,
        'sale': 5990000,
        'image': './image/tivi3.jpeg',
        'hotdeal': 1,
        'star': 3,
        'description': 'Sở hữu thiết kế sang trọng, màn hình siêu mỏng kích thước 58 inch, độ phân giải 4K sắc nét, công nghệ HDR10 tối ưu độ sáng, độ tương phản cho trải nghiệm xem phim tuyệt vời. Tích hợp hệ điều hành Google TV với giao diện trực quan, dễ sử dụng cùng kho ứng dụng giải trí đa dạng, phong phú. '
    },
    {
        'id': 4,
        'name': 'Samsung Smart TV UA43AU7002',
        'category': 'Tivi',
        'price': 15990000,
        'sale': 13990000,
        'image': './image/tivi4.jpeg',
        'hotdeal': 0,
        'star': 4.5,
        'description': 'Sở hữu thiết kế sang trọng, màn hình siêu mỏng kích thước 58 inch, độ phân giải 4K sắc nét, công nghệ HDR10 tối ưu độ sáng, độ tương phản cho trải nghiệm xem phim tuyệt vời. Tích hợp hệ điều hành Google TV với giao diện trực quan, dễ sử dụng cùng kho ứng dụng giải trí đa dạng, phong phú. '
    },
    {
        'id': 5,
        'name': 'Samsung Smart TV Crystal UHD UA65AU8100',
        'category': 'Tivi',
        'price': 8990000,
        'sale': 6890000,
        'image': './image/tivi5.jpeg',
        'hotdeal': 0,
        'star': 5,
        'description': 'Sở hữu thiết kế sang trọng, màn hình siêu mỏng kích thước 58 inch, độ phân giải 4K sắc nét, công nghệ HDR10 tối ưu độ sáng, độ tương phản cho trải nghiệm xem phim tuyệt vời. Tích hợp hệ điều hành Google TV với giao diện trực quan, dễ sử dụng cùng kho ứng dụng giải trí đa dạng, phong phú. '
    },
    {
        'id': 6,
        'name': 'LG Smart TV NanoCell 65NANO76SQA',
        'category': 'Tivi',
        'price': 7990000,
        'sale': 6990000,
        'image': './image/tivi6.jpeg',
        'hotdeal': 0,
        'star': 3.5,
        'description': 'Sở hữu thiết kế sang trọng, màn hình siêu mỏng kích thước 58 inch, độ phân giải 4K sắc nét, công nghệ HDR10 tối ưu độ sáng, độ tương phản cho trải nghiệm xem phim tuyệt vời. Tích hợp hệ điều hành Google TV với giao diện trực quan, dễ sử dụng cùng kho ứng dụng giải trí đa dạng, phong phú. '
    },
    {
        'id': 7,
        'name': 'Aqua 130 lít AQR-T150FA(BS)',
        'category': 'tủ lạnh',
        'price': 4990000,
        'sale': 3990000,
        'image': './image/tulanh1.jpeg',
        'hotdeal': 0,
        'star': 5,
        'description': 'Thuộc dòng tủ lạnh side by side được trang bị công nghệ Smart Inverter giúp tiết kiệm điện năng. Bên cạnh đó, công nghệ làm lạnh đa chiều mang hơi lạnh lan tỏa khắp các ngăn.'
    },
    {
        'id': 8,
        'name': 'Aqua Inverter 347 lít AQR-T400FA(WFB) ',
        'category': 'tủ lạnh',
        'price': 6590000,
        'sale': 6290000,
        'image': './image/tulanh2.jpeg',
        'hotdeal': 1,
        'star': 3,
        'description': 'Thuộc dòng tủ lạnh side by side được trang bị công nghệ Smart Inverter giúp tiết kiệm điện năng. Bên cạnh đó, công nghệ làm lạnh đa chiều mang hơi lạnh lan tỏa khắp các ngăn.'
    },
    {
        'id': 9,
        'name': 'Samsung Inverter 382 lít RT38CG6584B1SV ',
        'category': 'tủ lạnh',
        'price': 7990000,
        'sale': 6990000,
        'image': './image/tulanh3.jpeg',
        'hotdeal': 0,
        'star': 5,
        'description': 'Thuộc dòng tủ lạnh side by side được trang bị công nghệ Smart Inverter giúp tiết kiệm điện năng. Bên cạnh đó, công nghệ làm lạnh đa chiều mang hơi lạnh lan tỏa khắp các ngăn.'
    },
    {
        'id': 10,
        'name': 'Samsung Inverter 208 lít RT20HAR8DBU/SV',
        'category': 'tủ lạnh',
        'price': 8990000,
        'sale': 5990000,
        'image': './image/tulanh4.jpeg',
        'hotdeal': 1,
        'star': 4,
        'description': 'Thuộc dòng tủ lạnh side by side được trang bị công nghệ Smart Inverter giúp tiết kiệm điện năng. Bên cạnh đó, công nghệ làm lạnh đa chiều mang hơi lạnh lan tỏa khắp các ngăn.'
    },
    {
        'id': 11,
        'name': 'Aqua Inverter 260 lít AQR-B310MA(FB)',
        'category': 'tủ lạnh',
        'price': 7990000,
        'sale': 6990000,
        'image': './image/tulanh5.jpeg',
        'hotdeal': 1,
        'star': 5,
        'description': 'Thuộc dòng tủ lạnh side by side được trang bị công nghệ Smart Inverter giúp tiết kiệm điện năng. Bên cạnh đó, công nghệ làm lạnh đa chiều mang hơi lạnh lan tỏa khắp các ngăn.'
    },
    {
        'id': 12,
        'name': 'Toshiba Inverter 460 lít GR-RS600WI-PMV(37)-SG',
        'category': 'tủ lạnh',
        'price': 10990000,
        'sale': 7990000,
        'image': './image/tulanh6.jpeg',
        'hotdeal': 0,
        'star': 5,
        'description': 'Thuộc dòng tủ lạnh side by side được trang bị công nghệ Smart Inverter giúp tiết kiệm điện năng. Bên cạnh đó, công nghệ làm lạnh đa chiều mang hơi lạnh lan tỏa khắp các ngăn.'
    },
];


const tbody = document.querySelector('tbody')
function showPro() {
    tbody.innerHTML = ""
    data.forEach((item, index) => {
        tbody.innerHTML += `
        <tr>
            <td>${index + 1}</td>
            <td>${item.name}</td>
            <td><img src="${item.image}" width="120px"></td>
            <td>${item.price}</td>
            <td>${item.sale}</td>
            <td>${item.category}</td>
            <td>${item.hotdeal}</td>
            <td>${item.star}</td>
            <td>${item.description}</td>
            <td>
                <button onclick="openEditPage(${item.id})">Sửa</button>
                <button onclick="deletePage(${item.id})">Xoá</button>
            </td>
        </tr>
        `
    })
}

showPro()

const addModal = document.querySelector('#addModal')
const closeAdd = document.querySelector('.close')
document.querySelector('#openAddPage').onclick = function () {
    addModal.style.display = 'block'

}

closeAdd.onclick = () => {
    addModal.style.display = 'none'
}

var hotdeal = 0;
document.querySelector('#hotdeal').onchange = () => {
    if (this.checked) {
        hotdeal = 1
    } else {
        hotdeal = 0
    }
}

document.querySelector('#addPro').onclick = () => {
    const name = document.querySelector('#name').value
    const image = document.querySelector('#image').value.split("\\").pop()
    const price = document.querySelector('#price').value
    const sale = document.querySelector('#sale').value
    const category = document.querySelector('#category').value
    const description = document.querySelector('#description').value
    const id = data.length == 0 ? 0 : data[data.length - 1].id + 1
    const pro = {
        'id': id,
        'name': name,
        'image': "./image/" + image,
        'price': price,
        'sale': sale,
        'category': category,
        'hotdeal': hotdeal,
        'star': 5,
        'description': description
    }

    data.push(pro)
    addModal.style.display = 'none'
    showPro()
}
const editModal = document.querySelector('#editModal')
function openEditPage(id) {
    const pro = data.find(item => item.id == id)
    editModal.style.display = 'block'
    console.log(pro.id, pro.image);
    editModal.innerHTML += `
    <div class="modal-content">
    <span onclick=closeTab() class="close">&times;</span>

    <div class="form">
        <label for="">Tên sản phẩm</label>
        <br>
        <input value="${pro.name}" type="text" id="editname">
        <br>
        <label for="">Hình ảnh</label>
        <br>
        <img src="${pro.image}" width="200px" >
        <br>
        <input style="margin: 10px 0;" type="file" id="editimage">
        <br>
        <label for="">Giá</label>
        <br>
        <input value="${pro.price}" type="text" id="editprice">
        <br>
        <label for="">Giá khuyến mãi</label>
        <br>
        <input value="${pro.sale}" type="text" id="editsale">
        <br>
        <label for="">Danh mục</label>
        <br>
        <select style="width: 100%; height: 44px; margin: 10px 0;" id="editcategory">
            <option ${pro.category == "Tivi" ? "selected" : ""} value="Tivi">Tivi</option>
            <option ${pro.category == "máy giặt" ? "selected" : ""} value="máy giặt">Máy giăt</option>
            <option ${pro.category == "tủ lạnh" ? "selected" : ""} value="tủ lạnh">Tủ lạnh</option>
        </select>
        <br>
        <label for="">Hotdeal</label>
        <br>
        <input ${pro.hotdeal == "1" ? "checked" : ""} type="checkbox" id="edithotdeal">
        <br>
        <label for="">Mô tả</label>
        <br>
        <input value="${pro.description}" type="text" id="editdescription">
        <br>
        <button onclick="editPro(${id})" id="addPro">Sửa</button>
    </div>
</div>
    `
}

function closeTab() {
    editModal.style.display = 'none'
    editModal.innerHTML = ''
}

function editPro(id) {
    const name = document.querySelector('#editname').value

    var image = document.querySelector('#editimage').value.split("\\").pop()
    if (image == "") {
        image = data.find(item => item.id == id).image
    }
    const price = document.querySelector('#editprice').value
    const sale = document.querySelector('#editsale').value
    const category = document.querySelector('#editcategory').value
    var hotdeal = document.querySelector('#edithotdeal').value
    hotdeal = hotdeal == "on" ? 0 : 1;
    const description = document.querySelector('#editdescription').value

    const pro = {
        'id': id,
        'name': name,
        'image': "./image/" + image,
        'price': price,
        'sale': sale,
        'category': category,
        'hotdeal': hotdeal,
        'star': 5,
        'description': description
    }

    data = data.map(item => item.id == id ? pro : item)
    editModal.style.display = "none"
    showPro()
    console.log(id, pro);
}

function deletePage(id) {
    data = data.filter(item => item.id != id)
    showPro()
}